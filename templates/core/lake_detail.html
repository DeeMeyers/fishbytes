{% extends 'base.html' %}
{% load static %}

{% block content %}


<br>
<br>
<h1>{{ lake.name }}</h1>

<style>
    body {
        margin: 0;
        padding: 0;
    }

    #map {
        position: absolute;
        top: 16rem;
        bottom: 0;
        width: 100%;
    }
</style>
</head>

<body>

<div id="map"></div>

<script>
    mapboxgl.accessToken = "pk.eyJ1IjoibWFjazY2aG0iLCJhIjoiY2s4ZXowYnJmMDFseDNmcGhjbmg4ODc4cyJ9.17aD7Ep5mTEgYqTSKkwzUw";

    /* Map: This represents the map on the page. */
    var map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/mapbox/outdoors-v11",
        zoom: 9,
        center: [-79.0083, 35.7915]
    });

    map.on("load", function () {
        /* Image: An image is loaded and added to the map. */
        map.loadImage("https://i.imgur.com/MK4NUzI.png", function (error, image) {
            if (error) throw error;
            map.addImage("custom-marker", image);
            /* Style layer: A style layer ties together the source and image and specifies how they are displayed on the map. */
            map.addLayer({
                id: "markers",
                type: "symbol",
                /* Source: A data source specifies the geographic coordinate where the image marker gets placed. */
                source: {
                    type: "geojson",
                    data: {
                        type: 'FeatureCollection',
                        features: [
                            {
                                type: 'Feature',
                                properties: {},
                                geometry: {
                                    type: "Point",
                                    coordinates: [{{catch.longitude}}, {{catch.latitude}}]
                                }
                            }
                        ]
                    }
                },
                layout: {
                    "icon-image": "custom-marker",
                }
            });
        });
    });
</script>

<div class="lake-description">
    a description goes here
</div>

<div class="fish-in-lake">
    <h2>Fish In {{lake.name}}</h2>
</div>

<div class="dropdown">
    <button type="button" class="dropdown-trigger">Please Select a Fish</button>
    <div class="dropdown-menu">
        {% for fish in fishes %}
        <a href="/fish/{{fish.pk}}/">{{fish.name}}</a>
        {% endfor %}
    </div>
</div>

{% for fish in fishes %}
<div class='fishdeets'>
    <h3>{{ fish.name }}</h3>
    <div>
        <img src="/static/{{fish.img}}">
    </div>
    <h3>Description</h3>
    <div>
        {{fish.identifiers}}
    </div>
    <h3>Season</h3>
    {{fish.season}}
    <h3>Records</h3>
    <div>
        {{fish.citation}}
    </div>
    <h3><a href="/fish/{{fish.pk}}/">More Information</a></h3>
</div>
{% endfor %}
</body>
{% endblock %}